{% load static %}
<!-- start -->
{% block content %}
<!-- Hero -->
<section class="bg-warning">
    <div class="container w-75 pt-5 pb-5 d-flex justify-content-between align-items-center">
        <div class="title-container d-flex flex-column justify-content-center align-items-start ">
            <h1 class="header">It's all about good<br><span class="text-light">food</span> & taste</h1>
            <a href="#all-recipes" type="button" class="btn btn-dark fs-5 mt-3 px-5">See all <i class="fa-solid fa-angle-right mx-2 fs-6"></i></a>
        </div>
    
        <div>
            <img src="{% static '/images/meal-bg.png' %}" alt="a plate of food">
        </div>
    </div>
</section>
<!-- handpicked recipes -->
<section class="pb-5">
    <!-- container -->
    <div class="container-fluid w-100 pt-5 pb-5">
        <div class="container">
            <h2 class="fs-2 fw-semibold mb-5 mt-5 pb-1">âœ¨ Editor's Picks</h2>
        </div>
        <!-- flexbox row 3 -->
        <div class="container-fluid d-flex justify-content-center flex-wrap">
            {% for recipe in editors_pick %}
            <!-- recipe card -->
            <div class="card me-4" style="width: 30rem; height: max-content;">
                <center style="background-color: rgb(247, 247, 247);">
                    <img src="{{ recipe.image.url }}" class="card-img-top w-100" alt="recipe image" style="object-fit: cover; height: 500px;">
                </center>

                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        {% if recipe.difficulty == "Easy" %}
                        <p><span class="badge text-bg-success fs-6 py-2 px-3">{{ recipe.difficulty }}</span></p>
                        {% elif recipe.difficulty == "Medium" %}
                        <p><span class="badge text-bg-warning fs-6 py-2 px-3">{{ recipe.difficulty }}</span></p>
                        {% elif recipe.difficulty == "Hard" %}
                        <p><span class="badge text-bg-danger fs-6 py-2 px-3">{{ recipe.difficulty }}</span></p>
                        {% else %}
                        null
                        {% endif %}
                        <p class="text-muted"><i class="fa-solid fa-clock me-2"></i>{{ recipe.duration }}</p>
                    </div>
                    <h5 class="card-title fw-semibold fs-4" style="text-transform: capitalize;">{{ recipe.name }}</h5>
                    <p class="card-text" style="
                        line-height: 1.5em; 
                        height: 2em; 
                        overflow: hidden; 
                        white-space: nowrap;
                        text-overflow: ellipsis;
                        width: 100%;">{{ recipe.description }}</p>
                    <div class="d-flex justify-content-between align-items-center">
                        <!-- category -->
                        <span class="badge text-bg-dark px-3 py-2">{{ recipe.category }}</span>
                        <!-- read more button -->
                        <a href="{% url 'recipe-detail' recipe_id=recipe.id %}" class="btn btn-warning fw-semibold">Read more <i class="fa-solid fa-angle-right mx-1"></i></a>
                    </div>
                </div>
            </div>
            <!-- end of recipe card -->
            {% endfor %}
        </div>
    </div>
</section>

<!-- categories section -->
<section class="bg-warning pb-5">
    <div class="container w-75 py-5 ">
        <h2 class="fs-2 fw-semibold mb-4 mt-5 pb-1">Categories</h2>
        <!-- flexbox row wrap for displaying all categories -->
        <div class="d-flex flex-wrap ms-2 align-items-center">
            {% for cat in categories %}
                <div href="#" type="link" class="btn btn-light d-flex justify-content-between align-items-center py-1 ps-3 mb-2 me-2">
                    <p class="fs-4 me-3 my-0">{{ cat.name }}</p>
                    <p class="m-0"></p>
                </div>
                
            {% endfor %}
            
            {% if request.user.is_authenticated %}
            <span type="button" class="badge badge-light text-dark fs-4 me-2 mb-2 px-2">
                <a href="#" class="link-dark" data-bs-toggle="modal" data-bs-target="#cat">
                    <i class="fa-solid fa-circle-plus py-1 text-success"></i>
                </a>
                {% include 'add_cat.html' %}      
            </span> 
            {% else %}
            {% endif %}
        </div>
    </div>
</section>

<section>
    <div class="container w-100" id="all-recipes">
        <h2 class="fs-2 fw-semibold mb-4 mt-5 pb-1">All Recipes</h2>
    </div>
    

    <div class="container-fluid w-100 pb-5 ms-5 d-flex justify-content-center align-items-center">    
        <div class="d-flex w-75">
            <!-- filter sidebar container -->
            <div class="filter-container bg-light p-4 ms-5" style="width: 20%;">
                <h6 class="fw-bold fs-4"><i class="fa-solid fa-filter fs-6 me-2"></i> Filter by: </h6>
                <!-- add a button to delete filter tags here -->
                <div class="d-flex flex-wrap my-4">
                    <span class="btn btn-warning badge fs-6 fw-normal py-2 px-3 me-2 mb-2">
                        <a href="" class="link-dark" style="text-decoration: none ;">Easy <i class="fa-solid fa-xmark ms-2"></i></a>   
                    </span> 
                    <span class="btn btn-warning badge fs-6 fw-normal py-2 px-3 me-2 mb-2">
                        <a href="" class="link-dark" style="text-decoration: none ;">Hard <i class="fa-solid fa-xmark ms-2"></i></a>   
                    </span> 
                    <span class="btn btn-warning badge fs-6 fw-normal py-2 px-3 me-2 mb-2">
                        <a href="" class="link-dark" style="text-decoration: none ;">Medium <i class="fa-solid fa-xmark ms-2"></i></a>   
                    </span> 
                </div>
                
                <!-- filter by difficulty -->
                <h6 class="mt-3 mb-2 fw-bold">Difficulty: </h6>
                <div class="ms-4">
                    <!-- Easy -->
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="easy">
                        <label class="form-check-label" for="easy">
                        Easy
                        </label>                  
                    </div>
                    <!-- Medium -->
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="medium">
                        <label class="form-check-label" for="medium">
                        Medium
                        </label>                  
                    </div>
                    <!-- Hard -->
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="hard">
                        <label class="form-check-label" for="hard">
                        Hard
                        </label>                  
                    </div>
                </div>


                <!-- filter by category -->
                <h6 class="mt-3 mb-2 fw-bold border-top pt-2">Category: </h6>
                <div class="ms-4">
                    {% for category in categories %}
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="{{category.name}}">
                        <label class="form-check-label" for="{{category.name}}">
                            {{category.name}}
                        </label>                  
                    </div>
                    {% empty %}
                    <p>There's nothing to see here</p>
                    {% endfor %}
                </div>
                
                
                <!-- filter by ingredient -->
                <div class="mt-3 mb-2 border-top pt-2 d-flex justify-content-between align-items-center">
                    <h6 class="fw-bold">Ingredient: </h6>
                    {% if request.user.is_authenticated %}
                    <span class="badge badge-success py-1 px-2 m-0"><a href="#" class="link-light"  data-bs-toggle="modal" data-bs-target="#ing">Add</a></span>
                        {% include 'add_ing.html' %}      
                    {% endif %}
                </div>
                <div class="ms-4">
                    {% for ingredient in ingredients %}
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="{{ingredient.name}}">
                        <label class="form-check-label" for="{{ingredient.name}}">
                            {{ingredient.name}}
                        </label>                  
                    </div>
                    {% empty %}
                    <p>There's nothing to see here</p>
                    {% endfor %}
                </div>
                <!-- end of filter container -->
            </div>


            <!-- recipes container -->
            <div class=" d-flex flex-wrap ms-3" >
                {% for recipe in recipes %}
                <!-- recipe card -->
                <div class="card me-3 mb-3" style="width: 17rem; height: max-content;">
                    <center style="background-color: rgb(247, 247, 247);">
                        <img src="{{ recipe.image.url }}" class="card-img-top w-100" alt="recipe image" style="object-fit: cover; height: 200px;">
                    </center>

                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center">
                            {% if recipe.difficulty == "Easy" %}
                            <p><span class="badge text-bg-success py-1 px-2">{{ recipe.difficulty }}</span></p>
                            {% elif recipe.difficulty == "Medium" %}
                            <p><span class="badge text-bg-warning py-1 px-2">{{ recipe.difficulty }}</span></p>
                            {% elif recipe.difficulty == "Hard" %}
                            <p><span class="badge text-bg-danger py-1 px-2">{{ recipe.difficulty }}</span></p>
                            {% else %}
                            null
                            {% endif %}
                            <p class="text-muted"><i class="fa-solid fa-clock me-2"></i>{{ recipe.duration }}</p>
                        </div>
                        <h5 class="card-title fw-semibold fs-5" style="text-transform: capitalize;">{{ recipe.name }}</h5>
                        <!-- recipe description -->
                        <p class="card-text fs-6" style="
                            line-height: 1.5em; 
                            height: 2em; 
                            overflow: hidden; 
                            white-space: nowrap;
                            text-overflow: ellipsis;
                            width: 100%;">
                            {{ recipe.description }}
                        </p>
                        <div class="d-flex justify-content-between align-items-center">
                            <!-- category -->
                            <span class="badge text-bg-dark px-3 py-2">{{ recipe.category }}</span>
                            <!-- read more button -->
                            <a href="{% url 'recipe-detail' recipe_id=recipe.id %}" class="btn btn-warning fw-semibold"><i class="fa-solid fa-angle-right mx-1"></i></a>
                        </div>
                        
                    </div>
                </div>
                <!-- end of recipe card -->
                {% endfor %}
            </div>
        </div>
    </div>
</section>


{% endblock content %}